# 地图标注

ValPoint 使用 Leaflet 地图库，支持在地图上精准标注站位、瞄点和落点位置。

## 标注类型

### 英雄站位点（Stand）
- **用途**：标记英雄的站位位置
- **说明**：玩家应该站在这个位置投掷技能

### 技能落点（Land）
- **用途**：标记技能的落点位置
- **说明**：技能会落在这个位置

## 如何标注

### 在主页中标注
1. 点击主页右上角的新增点位
2. 在左侧栏分别选择地图、英雄、技能
3. 选择 “攻方” 或 “防守方”
4. 点击“设置站位”，在中部地图中标记英雄点位
5. 点击“设置落点”，在中部地图中标记英雄点位
6. 点击“填写图文攻略”
7. 设置点位标题（必填）
8. 点位来源链接 (可选)
- 支持多中格式





10. 点击 **地图图标** 按钮
11. 在弹出的地图上点击要标注的位置
12. 系统自动记录坐标
13. 点击保存

::: tip 提示
可以为站位图、瞄点图、落点图分别标注不同的位置。
:::

### 标注精度

- 地图使用像素坐标系统
- 坐标精确到小数点后两位
- 支持缩放和平移查看

### 多个标注

如果一个点位需要多个站位或瞄点：
1. 启用"站位图2"或"瞄点图2"
2. 分别标注不同的位置
3. 在描述中说明区别

## 查看标注

### 在地图上查看

1. 选择地图后，地图会显示所有点位的标注
2. 不同类型的标注用不同颜色区分：
   - 🔴 红色：站位点
   - 🔵 蓝色：瞄点
   - 🟢 绿色：落点

### 点击标注

点击地图上的标记可以：
- 查看点位详情
- 跳转到对应的点位卡片
- 查看图片和描述

### 筛选显示

可以通过筛选条件控制显示的标注：
- 按特工筛选
- 按侧翼筛选
- 按技能类型筛选

## 地图功能

### 缩放

- **鼠标滚轮**：放大/缩小
- **+/- 按钮**：放大/缩小
- **双击**：放大

### 平移

- **鼠标拖拽**：移动地图
- **触摸拖拽**：移动地图（移动端）

### 全屏

点击全屏按钮可以全屏查看地图。

## 支持的地图

ValPoint 支持所有 Valorant 竞技地图：

- Ascent（天界）
- Bind（双塔迷城）
- Haven（港湾）
- Split（分裂）
- Icebox（冰箱）
- Breeze（热带乐园）
- Fracture（断裂）
- Pearl（明珠）
- Lotus（莲华）
- Sunset（日落）
- Abyss（深渊）

## 地图图片

### 图片来源

地图图片存储在 `public/maps/` 目录：
```
public/maps/
├── ascent.png
├── bind.png
├── haven.png
├── split.png
├── icebox.png
├── breeze.png
├── fracture.png
├── pearl.png
├── lotus.png
├── sunset.png
└── abyss.png
```

### 自定义地图

如果需要使用自定义地图图片：
1. 将图片放入 `public/maps/` 目录
2. 在 `src/constants/maps.ts` 中配置
3. 重启开发服务器

## 最佳实践

### 标注准确性

- ✅ 在游戏中确认位置后再标注
- ✅ 使用地图上的明显参照物
- ✅ 多次测试确保准确性

### 标注说明

在描述中补充：
- 站位的具体位置（如"箱子后面"）
- 瞄准的参照物（如"窗户左上角"）
- 落点的效果（如"完全封烟"）

### 多角度标注

对于复杂的点位：
- 使用多张图片展示不同角度
- 标注多个关键位置
- 在描述中说明顺序

## 技术细节

### Leaflet 配置

```typescript
// 地图配置
const mapOptions = {
  crs: L.CRS.Simple,  // 使用简单坐标系
  minZoom: -2,
  maxZoom: 2,
  zoomControl: true,
  attributionControl: false
}
```

### 坐标系统

- 使用 Leaflet 的简单坐标系（CRS.Simple）
- 原点在左上角
- X 轴向右，Y 轴向下
- 坐标范围：[0, 0] 到 [图片宽度, 图片高度]

### 标记样式

```typescript
// 不同类型的标记颜色
const markerColors = {
  stand: '#ff4655',   // 红色
  aim: '#4dabf7',     // 蓝色
  land: '#51cf66'     // 绿色
}
```

## 常见问题

### Q: 标注不准确怎么办？

1. 重新编辑点位
2. 点击地图图标重新标注
3. 保存后刷新页面查看

### Q: 地图显示不完整？

可能的原因：
1. 图片加载失败 - 检查网络连接
2. 浏览器缓存问题 - 清除缓存重试
3. 地图文件缺失 - 检查 `public/maps/` 目录

### Q: 可以标注多个位置吗？

目前每个图片只能标注一个位置。如需多个位置：
- 使用"站位图2"、"瞄点图2"
- 或在描述中说明其他位置

### Q: 移动端可以标注吗？

可以，但建议使用桌面端标注，更精确。

### Q: 标注会显示在共享库吗？

会的！分享点位时，标注信息也会一起分享。
